{"ast":null,"code":"//      Copyright (c) 2012 Mathieu Turcotte\n//      Licensed under the MIT license.\n\nvar util = require('util');\nvar BackoffStrategy = require('./strategy');\n\n// Fibonacci backoff strategy.\nfunction FibonacciBackoffStrategy(options) {\n  BackoffStrategy.call(this, options);\n  this.backoffDelay_ = 0;\n  this.nextBackoffDelay_ = this.getInitialDelay();\n}\nutil.inherits(FibonacciBackoffStrategy, BackoffStrategy);\nFibonacciBackoffStrategy.prototype.next_ = function () {\n  var backoffDelay = Math.min(this.nextBackoffDelay_, this.getMaxDelay());\n  this.nextBackoffDelay_ += this.backoffDelay_;\n  this.backoffDelay_ = backoffDelay;\n  return backoffDelay;\n};\nFibonacciBackoffStrategy.prototype.reset_ = function () {\n  this.nextBackoffDelay_ = this.getInitialDelay();\n  this.backoffDelay_ = 0;\n};\nmodule.exports = FibonacciBackoffStrategy;","map":null,"metadata":{},"sourceType":"script"}